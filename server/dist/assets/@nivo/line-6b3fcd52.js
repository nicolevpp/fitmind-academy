import{r as b}from"../vendor-7d1efa17.js";import{E as et,m as Mt,P as $e,j as tt,Q as it,U as Se,a as Rt,v as St,e as nt,B as Ct,C as kt,$ as qt,G as rt,S as Tt,K as jt,w as Ot,F as Bt,Y as Ke,y as st}from"./core-3ffc6187.js";import{aY as je,aZ as Et,a_ as Lt,a$ as Pt,b0 as At,b1 as Wt,an as ot,b2 as Ve,am as It,b3 as Ee,b4 as Ft,b5 as Gt,b6 as $t,b7 as Ue,b8 as Ne,b9 as Vt,ba as Yt,bb as zt,bc as Dt,bd as Xt,be as Ht}from"./bar-18a6d402.js";import{j as M,X as a}from"../@mui/icons-material-aa7927d5.js";const Qe=Math.pow(2,-52),Oe=new Uint32Array(512);class Le{static from(e,i=Zt,r=Jt){const n=e.length,l=new Float64Array(n*2);for(let o=0;o<n;o++){const s=e[o];l[2*o]=i(s),l[2*o+1]=r(s)}return new Le(l)}constructor(e){const i=e.length>>1;if(i>0&&typeof e[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=e;const r=Math.max(2*i-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(i)),this._hullPrev=new Uint32Array(i),this._hullNext=new Uint32Array(i),this._hullTri=new Uint32Array(i),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(i),this._dists=new Float64Array(i),this.update()}update(){const{coords:e,_hullPrev:i,_hullNext:r,_hullTri:n,_hullHash:l}=this,o=e.length>>1;let s=1/0,u=1/0,h=-1/0,d=-1/0;for(let m=0;m<o;m++){const x=e[2*m],k=e[2*m+1];x<s&&(s=x),k<u&&(u=k),x>h&&(h=x),k>d&&(d=k),this._ids[m]=m}const c=(s+h)/2,f=(u+d)/2;let g=1/0,p,y,w;for(let m=0;m<o;m++){const x=Ae(c,f,e[2*m],e[2*m+1]);x<g&&(p=m,g=x)}const C=e[2*p],R=e[2*p+1];g=1/0;for(let m=0;m<o;m++){if(m===p)continue;const x=Ae(C,R,e[2*m],e[2*m+1]);x<g&&x>0&&(y=m,g=x)}let _=e[2*y],B=e[2*y+1],V=1/0;for(let m=0;m<o;m++){if(m===p||m===y)continue;const x=Nt(C,R,_,B,e[2*m],e[2*m+1]);x<V&&(w=m,V=x)}let F=e[2*w],H=e[2*w+1];if(V===1/0){for(let k=0;k<o;k++)this._dists[k]=e[2*k]-e[0]||e[2*k+1]-e[1];ve(this._ids,this._dists,0,o-1);const m=new Uint32Array(o);let x=0;for(let k=0,T=-1/0;k<o;k++){const P=this._ids[k];this._dists[P]>T&&(m[x++]=P,T=this._dists[P])}this.hull=m.subarray(0,x),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Be(C,R,_,B,F,H)){const m=y,x=_,k=B;y=w,_=F,B=H,w=m,F=x,H=k}const j=Qt(C,R,_,B,F,H);this._cx=j.x,this._cy=j.y;for(let m=0;m<o;m++)this._dists[m]=Ae(e[2*m],e[2*m+1],j.x,j.y);ve(this._ids,this._dists,0,o-1),this._hullStart=p;let q=3;r[p]=i[w]=y,r[y]=i[p]=w,r[w]=i[y]=p,n[p]=0,n[y]=1,n[w]=2,l.fill(-1),l[this._hashKey(C,R)]=p,l[this._hashKey(_,B)]=y,l[this._hashKey(F,H)]=w,this.trianglesLen=0,this._addTriangle(p,y,w,-1,-1,-1);for(let m=0,x,k;m<this._ids.length;m++){const T=this._ids[m],P=e[2*T],W=e[2*T+1];if(m>0&&Math.abs(P-x)<=Qe&&Math.abs(W-k)<=Qe||(x=P,k=W,T===p||T===y||T===w))continue;let G=0;for(let z=0,ee=this._hashKey(P,W);z<this._hashSize&&(G=l[(ee+z)%this._hashSize],!(G!==-1&&G!==r[G]));z++);G=i[G];let S=G,O;for(;O=r[S],!Be(P,W,e[2*S],e[2*S+1],e[2*O],e[2*O+1]);)if(S=O,S===G){S=-1;break}if(S===-1)continue;let K=this._addTriangle(S,T,r[S],-1,-1,n[S]);n[T]=this._legalize(K+2),n[S]=K,q++;let Y=r[S];for(;O=r[Y],Be(P,W,e[2*Y],e[2*Y+1],e[2*O],e[2*O+1]);)K=this._addTriangle(Y,T,O,n[T],-1,n[Y]),n[T]=this._legalize(K+2),r[Y]=Y,q--,Y=O;if(S===G)for(;O=i[S],Be(P,W,e[2*O],e[2*O+1],e[2*S],e[2*S+1]);)K=this._addTriangle(O,T,S,-1,n[S],n[O]),this._legalize(K+2),n[O]=K,r[S]=S,q--,S=O;this._hullStart=i[T]=S,r[S]=i[Y]=T,r[T]=Y,l[this._hashKey(P,W)]=T,l[this._hashKey(e[2*S],e[2*S+1])]=S}this.hull=new Uint32Array(q);for(let m=0,x=this._hullStart;m<q;m++)this.hull[m]=x,x=r[x];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,i){return Math.floor(Kt(e-this._cx,i-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:i,_halfedges:r,coords:n}=this;let l=0,o=0;for(;;){const s=r[e],u=e-e%3;if(o=u+(e+2)%3,s===-1){if(l===0)break;e=Oe[--l];continue}const h=s-s%3,d=u+(e+1)%3,c=h+(s+2)%3,f=i[o],g=i[e],p=i[d],y=i[c];if(Ut(n[2*f],n[2*f+1],n[2*g],n[2*g+1],n[2*p],n[2*p+1],n[2*y],n[2*y+1])){i[e]=y,i[s]=f;const C=r[c];if(C===-1){let _=this._hullStart;do{if(this._hullTri[_]===c){this._hullTri[_]=e;break}_=this._hullPrev[_]}while(_!==this._hullStart)}this._link(e,C),this._link(s,r[o]),this._link(o,c);const R=h+(s+1)%3;l<Oe.length&&(Oe[l++]=R)}else{if(l===0)break;e=Oe[--l]}}return o}_link(e,i){this._halfedges[e]=i,i!==-1&&(this._halfedges[i]=e)}_addTriangle(e,i,r,n,l,o){const s=this.trianglesLen;return this._triangles[s]=e,this._triangles[s+1]=i,this._triangles[s+2]=r,this._link(s,n),this._link(s+1,l),this._link(s+2,o),this.trianglesLen+=3,s}}function Kt(t,e){const i=t/(Math.abs(t)+Math.abs(e));return(e>0?3-i:1+i)/4}function Ae(t,e,i,r){const n=t-i,l=e-r;return n*n+l*l}function We(t,e,i,r,n,l){const o=(r-e)*(n-t),s=(i-t)*(l-e);return Math.abs(o-s)>=33306690738754716e-32*Math.abs(o+s)?o-s:0}function Be(t,e,i,r,n,l){return(We(n,l,t,e,i,r)||We(t,e,i,r,n,l)||We(i,r,n,l,t,e))<0}function Ut(t,e,i,r,n,l,o,s){const u=t-o,h=e-s,d=i-o,c=r-s,f=n-o,g=l-s,p=u*u+h*h,y=d*d+c*c,w=f*f+g*g;return u*(c*w-y*g)-h*(d*w-y*f)+p*(d*g-c*f)<0}function Nt(t,e,i,r,n,l){const o=i-t,s=r-e,u=n-t,h=l-e,d=o*o+s*s,c=u*u+h*h,f=.5/(o*h-s*u),g=(h*d-s*c)*f,p=(o*c-u*d)*f;return g*g+p*p}function Qt(t,e,i,r,n,l){const o=i-t,s=r-e,u=n-t,h=l-e,d=o*o+s*s,c=u*u+h*h,f=.5/(o*h-s*u),g=t+(h*d-s*c)*f,p=e+(o*c-u*d)*f;return{x:g,y:p}}function ve(t,e,i,r){if(r-i<=20)for(let n=i+1;n<=r;n++){const l=t[n],o=e[l];let s=n-1;for(;s>=i&&e[t[s]]>o;)t[s+1]=t[s--];t[s+1]=l}else{const n=i+r>>1;let l=i+1,o=r;Re(t,n,l),e[t[i]]>e[t[r]]&&Re(t,i,r),e[t[l]]>e[t[r]]&&Re(t,l,r),e[t[i]]>e[t[l]]&&Re(t,i,l);const s=t[l],u=e[s];for(;;){do l++;while(e[t[l]]<u);do o--;while(e[t[o]]>u);if(o<l)break;Re(t,l,o)}t[i+1]=t[o],t[o]=s,r-l+1>=o-i?(ve(t,e,l,r),ve(t,e,i,o-1)):(ve(t,e,i,o-1),ve(t,e,l,r))}}function Re(t,e,i){const r=t[e];t[e]=t[i],t[i]=r}function Zt(t){return t[0]}function Jt(t){return t[1]}const Ze=1e-6;class me{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,i){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+i}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,i){this._+=`L${this._x1=+e},${this._y1=+i}`}arc(e,i,r){e=+e,i=+i,r=+r;const n=e+r,l=i;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${n},${l}`:(Math.abs(this._x1-n)>Ze||Math.abs(this._y1-l)>Ze)&&(this._+="L"+n+","+l),r&&(this._+=`A${r},${r},0,1,1,${e-r},${i}A${r},${r},0,1,1,${this._x1=n},${this._y1=l}`)}rect(e,i,r,n){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+i}h${+r}v${+n}h${-r}Z`}value(){return this._||null}}class Ie{constructor(){this._=[]}moveTo(e,i){this._.push([e,i])}closePath(){this._.push(this._[0].slice())}lineTo(e,i){this._.push([e,i])}value(){return this._.length?this._:null}}class ei{constructor(e,[i,r,n,l]=[0,0,960,500]){if(!((n=+n)>=(i=+i))||!((l=+l)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(e.points.length*2),this.vectors=new Float64Array(e.points.length*2),this.xmax=n,this.xmin=i,this.ymax=l,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:e,hull:i,triangles:r},vectors:n}=this,l=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let g=0,p=0,y=r.length,w,C;g<y;g+=3,p+=2){const R=r[g]*2,_=r[g+1]*2,B=r[g+2]*2,V=e[R],F=e[R+1],H=e[_],j=e[_+1],q=e[B],m=e[B+1],x=H-V,k=j-F,T=q-V,P=m-F,W=x*x+k*k,G=T*T+P*P,S=(x*P-k*T)*2;if(!S)w=(V+q)/2-1e8*P,C=(F+m)/2+1e8*T;else if(Math.abs(S)<1e-8)w=(V+q)/2,C=(F+m)/2;else{const O=1/S;w=V+(P*W-k*G)*O,C=F+(x*G-T*W)*O}l[p]=w,l[p+1]=C}let o=i[i.length-1],s,u=o*4,h,d=e[2*o],c,f=e[2*o+1];n.fill(0);for(let g=0;g<i.length;++g)o=i[g],s=u,h=d,c=f,u=o*4,d=e[2*o],f=e[2*o+1],n[s+2]=n[u]=c-f,n[s+3]=n[u+1]=d-h}render(e){const i=e==null?e=new me:void 0,{delaunay:{halfedges:r,inedges:n,hull:l},circumcenters:o,vectors:s}=this;if(l.length<=1)return null;for(let d=0,c=r.length;d<c;++d){const f=r[d];if(f<d)continue;const g=Math.floor(d/3)*2,p=Math.floor(f/3)*2,y=o[g],w=o[g+1],C=o[p],R=o[p+1];this._renderSegment(y,w,C,R,e)}let u,h=l[l.length-1];for(let d=0;d<l.length;++d){u=h,h=l[d];const c=Math.floor(n[h]/3)*2,f=o[c],g=o[c+1],p=u*4,y=this._project(f,g,s[p+2],s[p+3]);y&&this._renderSegment(f,g,y[0],y[1],e)}return i&&i.value()}renderBounds(e){const i=e==null?e=new me:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),i&&i.value()}renderCell(e,i){const r=i==null?i=new me:void 0,n=this._clip(e);if(n===null||!n.length)return;i.moveTo(n[0],n[1]);let l=n.length;for(;n[0]===n[l-2]&&n[1]===n[l-1]&&l>1;)l-=2;for(let o=2;o<l;o+=2)(n[o]!==n[o-2]||n[o+1]!==n[o-1])&&i.lineTo(n[o],n[o+1]);return i.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:e}}=this;for(let i=0,r=e.length/2;i<r;++i){const n=this.cellPolygon(i);n&&(n.index=i,yield n)}}cellPolygon(e){const i=new Ie;return this.renderCell(e,i),i.value()}_renderSegment(e,i,r,n,l){let o;const s=this._regioncode(e,i),u=this._regioncode(r,n);s===0&&u===0?(l.moveTo(e,i),l.lineTo(r,n)):(o=this._clipSegment(e,i,r,n,s,u))&&(l.moveTo(o[0],o[1]),l.lineTo(o[2],o[3]))}contains(e,i,r){return i=+i,i!==i||(r=+r,r!==r)?!1:this.delaunay._step(e,i,r)===e}*neighbors(e){const i=this._clip(e);if(i)for(const r of this.delaunay.neighbors(e)){const n=this._clip(r);if(n){e:for(let l=0,o=i.length;l<o;l+=2)for(let s=0,u=n.length;s<u;s+=2)if(i[l]==n[s]&&i[l+1]==n[s+1]&&i[(l+2)%o]==n[(s+u-2)%u]&&i[(l+3)%o]==n[(s+u-1)%u]){yield r;break e}}}}_cell(e){const{circumcenters:i,delaunay:{inedges:r,halfedges:n,triangles:l}}=this,o=r[e];if(o===-1)return null;const s=[];let u=o;do{const h=Math.floor(u/3);if(s.push(i[h*2],i[h*2+1]),u=u%3===2?u-2:u+1,l[u]!==e)break;u=n[u]}while(u!==o&&u!==-1);return s}_clip(e){if(e===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const i=this._cell(e);if(i===null)return null;const{vectors:r}=this,n=e*4;return r[n]||r[n+1]?this._clipInfinite(e,i,r[n],r[n+1],r[n+2],r[n+3]):this._clipFinite(e,i)}_clipFinite(e,i){const r=i.length;let n=null,l,o,s=i[r-2],u=i[r-1],h,d=this._regioncode(s,u),c,f;for(let g=0;g<r;g+=2)if(l=s,o=u,s=i[g],u=i[g+1],h=d,d=this._regioncode(s,u),h===0&&d===0)c=f,f=0,n?n.push(s,u):n=[s,u];else{let p,y,w,C,R;if(h===0){if((p=this._clipSegment(l,o,s,u,h,d))===null)continue;[y,w,C,R]=p}else{if((p=this._clipSegment(s,u,l,o,d,h))===null)continue;[C,R,y,w]=p,c=f,f=this._edgecode(y,w),c&&f&&this._edge(e,c,f,n,n.length),n?n.push(y,w):n=[y,w]}c=f,f=this._edgecode(C,R),c&&f&&this._edge(e,c,f,n,n.length),n?n.push(C,R):n=[C,R]}if(n)c=f,f=this._edgecode(n[0],n[1]),c&&f&&this._edge(e,c,f,n,n.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return n}_clipSegment(e,i,r,n,l,o){for(;;){if(l===0&&o===0)return[e,i,r,n];if(l&o)return null;let s,u,h=l||o;h&8?(s=e+(r-e)*(this.ymax-i)/(n-i),u=this.ymax):h&4?(s=e+(r-e)*(this.ymin-i)/(n-i),u=this.ymin):h&2?(u=i+(n-i)*(this.xmax-e)/(r-e),s=this.xmax):(u=i+(n-i)*(this.xmin-e)/(r-e),s=this.xmin),l?(e=s,i=u,l=this._regioncode(e,i)):(r=s,n=u,o=this._regioncode(r,n))}}_clipInfinite(e,i,r,n,l,o){let s=Array.from(i),u;if((u=this._project(s[0],s[1],r,n))&&s.unshift(u[0],u[1]),(u=this._project(s[s.length-2],s[s.length-1],l,o))&&s.push(u[0],u[1]),s=this._clipFinite(e,s))for(let h=0,d=s.length,c,f=this._edgecode(s[d-2],s[d-1]);h<d;h+=2)c=f,f=this._edgecode(s[h],s[h+1]),c&&f&&(h=this._edge(e,c,f,s,h),d=s.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}_edge(e,i,r,n,l){for(;i!==r;){let o,s;switch(i){case 5:i=4;continue;case 4:i=6,o=this.xmax,s=this.ymin;break;case 6:i=2;continue;case 2:i=10,o=this.xmax,s=this.ymax;break;case 10:i=8;continue;case 8:i=9,o=this.xmin,s=this.ymax;break;case 9:i=1;continue;case 1:i=5,o=this.xmin,s=this.ymin;break}(n[l]!==o||n[l+1]!==s)&&this.contains(e,o,s)&&(n.splice(l,0,o,s),l+=2)}if(n.length>4)for(let o=0;o<n.length;o+=2){const s=(o+2)%n.length,u=(o+4)%n.length;(n[o]===n[s]&&n[s]===n[u]||n[o+1]===n[s+1]&&n[s+1]===n[u+1])&&(n.splice(s,2),o-=2)}return l}_project(e,i,r,n){let l=1/0,o,s,u;if(n<0){if(i<=this.ymin)return null;(o=(this.ymin-i)/n)<l&&(u=this.ymin,s=e+(l=o)*r)}else if(n>0){if(i>=this.ymax)return null;(o=(this.ymax-i)/n)<l&&(u=this.ymax,s=e+(l=o)*r)}if(r>0){if(e>=this.xmax)return null;(o=(this.xmax-e)/r)<l&&(s=this.xmax,u=i+(l=o)*n)}else if(r<0){if(e<=this.xmin)return null;(o=(this.xmin-e)/r)<l&&(s=this.xmin,u=i+(l=o)*n)}return[s,u]}_edgecode(e,i){return(e===this.xmin?1:e===this.xmax?2:0)|(i===this.ymin?4:i===this.ymax?8:0)}_regioncode(e,i){return(e<this.xmin?1:e>this.xmax?2:0)|(i<this.ymin?4:i>this.ymax?8:0)}}const ti=2*Math.PI,xe=Math.pow;function ii(t){return t[0]}function ni(t){return t[1]}function ri(t){const{triangles:e,coords:i}=t;for(let r=0;r<e.length;r+=3){const n=2*e[r],l=2*e[r+1],o=2*e[r+2];if((i[o]-i[n])*(i[l+1]-i[n+1])-(i[l]-i[n])*(i[o+1]-i[n+1])>1e-10)return!1}return!0}function si(t,e,i){return[t+Math.sin(t+e)*i,e+Math.cos(t-e)*i]}class Ye{static from(e,i=ii,r=ni,n){return new Ye("length"in e?oi(e,i,r,n):Float64Array.from(li(e,i,r,n)))}constructor(e){this._delaunator=new Le(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const e=this._delaunator,i=this.points;if(e.hull&&e.hull.length>2&&ri(e)){this.collinear=Int32Array.from({length:i.length/2},(f,g)=>g).sort((f,g)=>i[2*f]-i[2*g]||i[2*f+1]-i[2*g+1]);const u=this.collinear[0],h=this.collinear[this.collinear.length-1],d=[i[2*u],i[2*u+1],i[2*h],i[2*h+1]],c=1e-8*Math.hypot(d[3]-d[1],d[2]-d[0]);for(let f=0,g=i.length/2;f<g;++f){const p=si(i[2*f],i[2*f+1],c);i[2*f]=p[0],i[2*f+1]=p[1]}this._delaunator=new Le(i)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,n=this.hull=this._delaunator.hull,l=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),s=this._hullIndex.fill(-1);for(let u=0,h=r.length;u<h;++u){const d=l[u%3===2?u-2:u+1];(r[u]===-1||o[d]===-1)&&(o[d]=u)}for(let u=0,h=n.length;u<h;++u)s[n[u]]=u;n.length<=2&&n.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=n[0],this.triangles[1]=n[1],this.triangles[2]=n[1],o[n[0]]=1,n.length===2&&(o[n[1]]=0))}voronoi(e){return new ei(this,e)}*neighbors(e){const{inedges:i,hull:r,_hullIndex:n,halfedges:l,triangles:o,collinear:s}=this;if(s){const c=s.indexOf(e);c>0&&(yield s[c-1]),c<s.length-1&&(yield s[c+1]);return}const u=i[e];if(u===-1)return;let h=u,d=-1;do{if(yield d=o[h],h=h%3===2?h-2:h+1,o[h]!==e)return;if(h=l[h],h===-1){const c=r[(n[e]+1)%r.length];c!==d&&(yield c);return}}while(h!==u)}find(e,i,r=0){if(e=+e,e!==e||(i=+i,i!==i))return-1;const n=r;let l;for(;(l=this._step(r,e,i))>=0&&l!==r&&l!==n;)r=l;return l}_step(e,i,r){const{inedges:n,hull:l,_hullIndex:o,halfedges:s,triangles:u,points:h}=this;if(n[e]===-1||!h.length)return(e+1)%(h.length>>1);let d=e,c=xe(i-h[e*2],2)+xe(r-h[e*2+1],2);const f=n[e];let g=f;do{let p=u[g];const y=xe(i-h[p*2],2)+xe(r-h[p*2+1],2);if(y<c&&(c=y,d=p),g=g%3===2?g-2:g+1,u[g]!==e)break;if(g=s[g],g===-1){if(g=l[(o[e]+1)%l.length],g!==p&&xe(i-h[g*2],2)+xe(r-h[g*2+1],2)<c)return g;break}}while(g!==f);return d}render(e){const i=e==null?e=new me:void 0,{points:r,halfedges:n,triangles:l}=this;for(let o=0,s=n.length;o<s;++o){const u=n[o];if(u<o)continue;const h=l[o]*2,d=l[u]*2;e.moveTo(r[h],r[h+1]),e.lineTo(r[d],r[d+1])}return this.renderHull(e),i&&i.value()}renderPoints(e,i=2){const r=e==null?e=new me:void 0,{points:n}=this;for(let l=0,o=n.length;l<o;l+=2){const s=n[l],u=n[l+1];e.moveTo(s+i,u),e.arc(s,u,i,0,ti)}return r&&r.value()}renderHull(e){const i=e==null?e=new me:void 0,{hull:r,points:n}=this,l=r[0]*2,o=r.length;e.moveTo(n[l],n[l+1]);for(let s=1;s<o;++s){const u=2*r[s];e.lineTo(n[u],n[u+1])}return e.closePath(),i&&i.value()}hullPolygon(){const e=new Ie;return this.renderHull(e),e.value()}renderTriangle(e,i){const r=i==null?i=new me:void 0,{points:n,triangles:l}=this,o=l[e*=3]*2,s=l[e+1]*2,u=l[e+2]*2;return i.moveTo(n[o],n[o+1]),i.lineTo(n[s],n[s+1]),i.lineTo(n[u],n[u+1]),i.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:e}=this;for(let i=0,r=e.length/3;i<r;++i)yield this.trianglePolygon(i)}trianglePolygon(e){const i=new Ie;return this.renderTriangle(e,i),i.value()}}function oi(t,e,i,r){const n=t.length,l=new Float64Array(n*2);for(let o=0;o<n;++o){const s=t[o];l[o*2]=e.call(r,s,o,t),l[o*2+1]=i.call(r,s,o,t)}return l}function*li(t,e,i,r){let n=0;for(const l of t)yield e.call(r,l,n,t),yield i.call(r,l,n,t),++n}var Je=function(t){return typeof t=="function"?t:function(e){return e[t]}},ai=function(t){var e=t.points,i=t.x,r=i===void 0?"x":i,n=t.y,l=n===void 0?"y":n,o=Je(r),s=Je(l);return e.map(function(u){return[o(u),s(u)]})},ui=function(t){var e=t.points,i=t.width,r=t.height,n=t.debug,l=Ye.from(e),o=n?l.voronoi([0,0,i,r]):void 0;return{delaunay:l,voronoi:o}},lt=function(t){var e=t.points,i=t.x,r=t.y,n=t.width,l=t.height,o=t.debug,s=b.useMemo(function(){return ai({points:e,x:i,y:r})},[e,i,r]);return b.useMemo(function(){return ui({points:s,width:n,height:l,debug:o})},[s,n,l,o])},hi=function(t){var e=t.nodes,i=t.width,r=t.height,n=t.x,l=t.y,o=t.onMouseEnter,s=t.onMouseMove,u=t.onMouseLeave,h=t.onClick,d=t.debug,c=b.useRef(null),f=b.useState(null),g=f[0],p=f[1],y=lt({points:e,x:n,y:l,width:i,height:r,debug:d}),w=y.delaunay,C=y.voronoi,R=b.useMemo(function(){if(d&&C)return C.render()},[d,C]),_=b.useCallback(function(j){if(!c.current)return[null,null];var q=et(c.current,j),m=q[0],x=q[1],k=w.find(m,x);return[k,k!==void 0?e[k]:null]},[c,w]),B=b.useCallback(function(j){var q=_(j),m=q[0],x=q[1];p(m),x&&(o==null||o(x,j))},[_,p,o]),V=b.useCallback(function(j){var q=_(j),m=q[0],x=q[1];p(m),x&&(s==null||s(x,j))},[_,p,s]),F=b.useCallback(function(j){if(p(null),u){var q=void 0;g!==null&&(q=e[g]),q&&u(q,j)}},[p,g,u,e]),H=b.useCallback(function(j){var q=_(j),m=q[0],x=q[1];p(m),x&&(h==null||h(x,j))},[_,p,h]);return M.jsxs("g",{ref:c,children:[d&&C&&M.jsxs(M.Fragment,{children:[M.jsx("path",{d:R,stroke:"red",strokeWidth:1,opacity:.75}),g!==null&&M.jsx("path",{fill:"pink",opacity:.35,d:C.renderCell(g)})]}),M.jsx("rect",{width:i,height:r,fill:"red",opacity:0,style:{cursor:"auto"},onMouseEnter:B,onMouseMove:V,onMouseLeave:F,onClick:H})]})},ci=function(t,e){t.save(),t.globalAlpha=.75,t.beginPath(),e.render(t),t.strokeStyle="red",t.lineWidth=1,t.stroke(),t.restore()},di=function(t,e,i){t.save(),t.globalAlpha=.35,t.beginPath(),e.renderCell(i,t),t.fillStyle="red",t.fill(),t.restore()};function X(){return X=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},X.apply(this,arguments)}var at=function(t){var e=t.point;return M.jsx(Pt,{id:M.jsxs("span",{children:["x: ",M.jsx("strong",{children:e.data.xFormatted}),", y:"," ",M.jsx("strong",{children:e.data.yFormatted})]}),enableChip:!0,color:e.serieColor})};at.propTypes={point:a.object.isRequired};var fi=b.memo(at),ut=function(t){var e=t.slice,i=t.axis,r=Se(),n=i==="x"?"y":"x";return M.jsx(At,{rows:e.points.map(function(l){return[M.jsx(Wt,{color:l.serieColor,style:r.tooltip.chip},"chip"),l.serieId,M.jsx("span",{style:r.tooltip.tableCellValue,children:l.data[n+"Formatted"]},"value")]})})};ut.propTypes={slice:a.object.isRequired,axis:a.oneOf(["x","y"]).isRequired};var gi=b.memo(ut),ht={data:a.arrayOf(a.shape({id:a.oneOfType([a.string,a.number]).isRequired,data:a.arrayOf(a.shape({x:a.oneOfType([a.number,a.string,a.instanceOf(Date)]),y:a.oneOfType([a.number,a.string,a.instanceOf(Date)])})).isRequired})).isRequired,xScale:a.object.isRequired,xFormat:a.oneOfType([a.func,a.string]),yScale:a.object.isRequired,yFormat:a.oneOfType([a.func,a.string]),layers:a.arrayOf(a.oneOfType([a.oneOf(["grid","markers","axes","areas","crosshair","lines","slices","points","mesh","legends"]),a.func])).isRequired,curve:Mt.isRequired,axisTop:je,axisRight:je,axisBottom:je,axisLeft:je,enableGridX:a.bool.isRequired,enableGridY:a.bool.isRequired,gridXValues:a.oneOfType([a.number,a.arrayOf(a.oneOfType([a.number,a.string,a.instanceOf(Date)]))]),gridYValues:a.oneOfType([a.number,a.arrayOf(a.oneOfType([a.number,a.string,a.instanceOf(Date)]))]),enablePoints:a.bool.isRequired,pointSymbol:a.func,pointSize:a.number.isRequired,pointColor:a.any.isRequired,pointBorderWidth:a.number.isRequired,pointBorderColor:a.any.isRequired,enablePointLabel:a.bool.isRequired,pointLabel:a.oneOfType([a.string,a.func]).isRequired,markers:a.arrayOf(a.shape({axis:a.oneOf(["x","y"]).isRequired,value:a.oneOfType([a.number,a.string,a.instanceOf(Date)]).isRequired,style:a.object})),colors:Et.isRequired,enableArea:a.bool.isRequired,areaOpacity:a.number.isRequired,areaBlendMode:$e.isRequired,areaBaselineValue:a.oneOfType([a.number,a.string,a.instanceOf(Date)]).isRequired,lineWidth:a.number.isRequired,legends:a.arrayOf(a.shape(Lt)).isRequired,isInteractive:a.bool.isRequired,debugMesh:a.bool.isRequired,tooltip:a.oneOfType([a.func,a.object]).isRequired,enableSlices:a.oneOf(["x","y",!1]).isRequired,debugSlices:a.bool.isRequired,sliceTooltip:a.oneOfType([a.func,a.object]).isRequired,enableCrosshair:a.bool.isRequired,crosshairType:a.string.isRequired},pi=X({},ht,{enablePointLabel:a.bool.isRequired,role:a.string.isRequired,useMesh:a.bool.isRequired},Rt,St),mi=X({pixelRatio:a.number.isRequired},ht),ct={curve:"linear",xScale:{type:"point"},yScale:{type:"linear",min:0,max:"auto"},layers:["grid","markers","axes","areas","crosshair","lines","points","slices","mesh","legends"],axisBottom:{},axisLeft:{},enableGridX:!0,enableGridY:!0,enablePoints:!0,pointSize:6,pointColor:{from:"color"},pointBorderWidth:0,pointBorderColor:{theme:"background"},enablePointLabel:!1,pointLabel:"yFormatted",colors:{scheme:"nivo"},enableArea:!1,areaBaselineValue:0,areaOpacity:.2,areaBlendMode:"normal",lineWidth:2,legends:[],isInteractive:!0,tooltip:fi,enableSlices:!1,debugSlices:!1,sliceTooltip:gi,debugMesh:!1,enableCrosshair:!0,crosshairType:"bottom-left"},le=X({},ct,{enablePointLabel:!1,useMesh:!1,animate:!0,motionConfig:"gentle",defs:[],fill:[],role:"img"}),yi=X({},ct,{pixelRatio:typeof window<"u"&&window.devicePixelRatio||1}),bi=function(t){var e=t.curve;return b.useMemo(function(){return Xt().defined(function(i){return i.x!==null&&i.y!==null}).x(function(i){return i.x}).y(function(i){return i.y}).curve(st(e))},[e])},xi=function(t){var e=t.curve,i=t.yScale,r=t.areaBaselineValue;return b.useMemo(function(){return Ht().defined(function(n){return n.x!==null&&n.y!==null}).x(function(n){return n.x}).y1(function(n){return n.y}).curve(st(e)).y0(i(r))},[e,i,r])},vi=function(t){var e=t.enableSlices,i=t.points,r=t.width,n=t.height;return b.useMemo(function(){if(e===!1)return[];if(e==="x"){var l=new Map;return i.forEach(function(s){s.data.x!==null&&s.data.y!==null&&(l.has(s.x)?l.get(s.x).push(s):l.set(s.x,[s]))}),Array.from(l.entries()).sort(function(s,u){return s[0]-u[0]}).map(function(s,u,h){var d,c=s[0],f=s[1],g=h[u-1],p=h[u+1];return{id:c,x0:d=g?c-(c-g[0])/2:c,x:c,y0:0,y:0,width:p?c-d+(p[0]-c)/2:r-d,height:n,points:f.reverse()}})}if(e==="y"){var o=new Map;return i.forEach(function(s){s.data.x!==null&&s.data.y!==null&&(o.has(s.y)?o.get(s.y).push(s):o.set(s.y,[s]))}),Array.from(o.entries()).sort(function(s,u){return s[0]-u[0]}).map(function(s,u,h){var d,c,f=s[0],g=s[1],p=h[u-1],y=h[u+1];return d=p?f-(f-p[0])/2:f,c=y?f-d+(y[0]-f)/2:n-d,{id:f,x0:0,x:0,y0:d,y:f,width:r,height:c,points:g.reverse()}})}},[e,i])},dt=function(t){var e=t.data,i=t.xScale,r=i===void 0?le.xScale:i,n=t.xFormat,l=t.yScale,o=l===void 0?le.yScale:l,s=t.yFormat,u=t.width,h=t.height,d=t.colors,c=d===void 0?le.colors:d,f=t.curve,g=f===void 0?le.curve:f,p=t.areaBaselineValue,y=p===void 0?le.areaBaselineValue:p,w=t.pointColor,C=w===void 0?le.pointColor:w,R=t.pointBorderColor,_=R===void 0?le.pointBorderColor:R,B=t.enableSlices,V=B===void 0?le.enableSlicesTooltip:B,F=Ke(n),H=Ke(s),j=zt(c,"id"),q=Se(),m=Ee(C,q),x=Ee(_,q),k=b.useState([]),T=k[0],P=k[1],W=b.useMemo(function(){return Dt(e.filter(function(E){return T.indexOf(E.id)===-1}),r,o,u,h)},[e,T,r,o,u,h]),G=W.xScale,S=W.yScale,O=W.series,K=b.useMemo(function(){var E=e.map(function(A){return{id:A.id,label:A.id,color:j(A)}}),$=E.map(function(A){return X({},O.find(function(D){return D.id===A.id}),{color:A.color})}).filter(function(A){return!!A.id});return{legendData:E.map(function(A){return X({},A,{hidden:!$.find(function(D){return D.id===A.id})})}).reverse(),series:$}},[e,O,j]),Y=K.legendData,z=K.series,ee=b.useCallback(function(E){P(function($){return $.indexOf(E)>-1?$.filter(function(A){return A!==E}):[].concat($,[E])})},[]),re=function(E){var $=E.series,A=E.getPointColor,D=E.getPointBorderColor,he=E.formatX,U=E.formatY;return b.useMemo(function(){return $.reduce(function(se,Z){return[].concat(se,Z.data.filter(function(N){return N.position.x!==null&&N.position.y!==null}).map(function(N,ae){var ie={id:Z.id+"."+ae,index:se.length+ae,serieId:Z.id,serieColor:Z.color,x:N.position.x,y:N.position.y};return ie.color=A(Z),ie.borderColor=D(ie),ie.data=X({},N.data,{xFormatted:he(N.data.x),yFormatted:U(N.data.y)}),ie}))},[])},[$,A,D,he,U])}({series:z,getPointColor:m,getPointBorderColor:x,formatX:F,formatY:H}),te=vi({enableSlices:V,points:re,width:u,height:h});return{legendData:Y,toggleSerie:ee,lineGenerator:bi({curve:g}),areaGenerator:xi({curve:g,yScale:S,areaBaselineValue:y}),getColor:j,series:z,xScale:G,yScale:S,slices:te,points:re}},ft=function(t){var e=t.areaBlendMode,i=t.areaOpacity,r=t.color,n=t.fill,l=t.path,o=qt(),s=o.animate,u=o.config,h=nt(l),d=It({color:r,config:u,immediate:!s});return M.jsx(ot.path,{d:h,fill:n||d.color,fillOpacity:i,strokeWidth:0,style:{mixBlendMode:e}})};ft.propTypes={areaBlendMode:$e.isRequired,areaOpacity:a.number.isRequired,color:a.string,fill:a.string,path:a.string.isRequired};var gt=function(t){var e=t.areaGenerator,i=t.areaOpacity,r=t.areaBlendMode,n=t.lines.slice(0).reverse();return M.jsx("g",{children:n.map(function(l){return M.jsx(ft,X({path:e(l.data.map(function(o){return o.position}))},X({areaOpacity:i,areaBlendMode:r},l)),l.id)})})};gt.propTypes={areaGenerator:a.func.isRequired,areaOpacity:a.number.isRequired,areaBlendMode:$e.isRequired,lines:a.arrayOf(a.object).isRequired};var _i=b.memo(gt),pt=function(t){var e=t.lineGenerator,i=t.points,r=t.color,n=t.thickness,l=b.useMemo(function(){return e(i)},[e,i]),o=nt(l);return M.jsx(ot.path,{d:o,fill:"none",strokeWidth:n,stroke:r})};pt.propTypes={points:a.arrayOf(a.shape({x:a.oneOfType([a.string,a.number]),y:a.oneOfType([a.string,a.number])})),lineGenerator:a.func.isRequired,color:a.string.isRequired,thickness:a.number.isRequired};var wi=b.memo(pt),mt=function(t){var e=t.lines,i=t.lineGenerator,r=t.lineWidth;return e.slice(0).reverse().map(function(n){var l=n.id,o=n.data,s=n.color;return M.jsx(wi,{id:l,points:o.map(function(u){return u.position}),lineGenerator:i,color:s,thickness:r},l)})};mt.propTypes={lines:a.arrayOf(a.shape({id:a.oneOfType([a.string,a.number]).isRequired,color:a.string.isRequired,data:a.arrayOf(a.shape({data:a.shape({x:a.oneOfType([a.string,a.number,a.instanceOf(Date)]),y:a.oneOfType([a.string,a.number,a.instanceOf(Date)])}).isRequired,position:a.shape({x:a.number,y:a.number}).isRequired})).isRequired})).isRequired,lineWidth:a.number.isRequired,lineGenerator:a.func.isRequired};var Mi=b.memo(mt),yt=function(t){var e=t.slice,i=t.axis,r=t.debug,n=t.tooltip,l=t.isCurrent,o=t.setCurrent,s=t.onMouseEnter,u=t.onMouseMove,h=t.onMouseLeave,d=t.onClick,c=Ve(),f=c.showTooltipFromEvent,g=c.hideTooltip,p=b.useCallback(function(R){f(b.createElement(n,{slice:e,axis:i}),R,"right"),o(e),s&&s(e,R)},[f,n,e,s]),y=b.useCallback(function(R){f(b.createElement(n,{slice:e,axis:i}),R,"right"),u&&u(e,R)},[f,n,e,u]),w=b.useCallback(function(R){g(),o(null),h&&h(e,R)},[g,e,h]),C=b.useCallback(function(R){d&&d(e,R)},[e,d]);return M.jsx("rect",{x:e.x0,y:e.y0,width:e.width,height:e.height,stroke:"red",strokeWidth:r?1:0,strokeOpacity:.75,fill:"red",fillOpacity:l&&r?.35:0,onMouseEnter:p,onMouseMove:y,onMouseLeave:w,onClick:C,"data-testid":"slice-"+e.id})};yt.propTypes={slice:a.object.isRequired,axis:a.oneOf(["x","y"]).isRequired,debug:a.bool.isRequired,height:a.number.isRequired,tooltip:a.oneOfType([a.func,a.object]),isCurrent:a.bool.isRequired,setCurrent:a.func.isRequired,onMouseEnter:a.func,onMouseMove:a.func,onMouseLeave:a.func,onClick:a.func};var Ri=b.memo(yt),bt=function(t){var e=t.slices,i=t.axis,r=t.debug,n=t.height,l=t.tooltip,o=t.current,s=t.setCurrent,u=t.onMouseEnter,h=t.onMouseMove,d=t.onMouseLeave,c=t.onClick;return e.map(function(f){return M.jsx(Ri,{slice:f,axis:i,debug:r,height:n,tooltip:l,setCurrent:s,isCurrent:o!==null&&o.id===f.id,onMouseEnter:u,onMouseMove:h,onMouseLeave:d,onClick:c},f.id)})};bt.propTypes={slices:a.arrayOf(a.shape({id:a.oneOfType([a.number,a.string,a.instanceOf(Date)]).isRequired,x:a.number.isRequired,y:a.number.isRequired,points:a.arrayOf(a.object).isRequired})).isRequired,axis:a.oneOf(["x","y"]).isRequired,debug:a.bool.isRequired,height:a.number.isRequired,tooltip:a.oneOfType([a.func,a.object]).isRequired,current:a.object,setCurrent:a.func.isRequired,onMouseEnter:a.func,onMouseMove:a.func,onMouseLeave:a.func,onClick:a.func};var Si=b.memo(bt),xt=function(t){var e=t.points,i=t.symbol,r=t.size,n=t.borderWidth,l=t.enableLabel,o=t.label,s=t.labelYOffset,u=Se(),h=Ct(o),d=e.slice(0).reverse().map(function(c){return{id:c.id,x:c.x,y:c.y,datum:c.data,fill:c.color,stroke:c.borderColor,label:l?h(c.data):null}});return M.jsx("g",{children:d.map(function(c){return M.jsx(kt,{x:c.x,y:c.y,datum:c.datum,symbol:i,size:r,color:c.fill,borderWidth:n,borderColor:c.stroke,label:c.label,labelYOffset:s,theme:u},c.id)})})};xt.propTypes={points:a.arrayOf(a.object),symbol:a.func,size:a.number.isRequired,color:a.func.isRequired,borderWidth:a.number.isRequired,borderColor:a.func.isRequired,enableLabel:a.bool.isRequired,label:a.oneOfType([a.string,a.func]).isRequired,labelYOffset:a.number};var Ci=b.memo(xt),vt=function(t){var e=t.points,i=t.width,r=t.height,n=t.margin,l=t.setCurrent,o=t.onMouseEnter,s=t.onMouseMove,u=t.onMouseLeave,h=t.onClick,d=t.tooltip,c=t.debug,f=Ve(),g=f.showTooltipAt,p=f.hideTooltip,y=b.useCallback(function(_,B){g(b.createElement(d,{point:_}),[_.x+n.left,_.y+n.top],"top"),l(_),o&&o(_,B)},[l,g,d,o,n]),w=b.useCallback(function(_,B){g(b.createElement(d,{point:_}),[_.x+n.left,_.y+n.top],"top"),l(_),s&&s(_,B)},[l,g,d,s]),C=b.useCallback(function(_,B){p(),l(null),u&&u(_,B)},[p,l,u]),R=b.useCallback(function(_,B){h&&h(_,B)},[h]);return M.jsx(hi,{nodes:e,width:i,height:r,onMouseEnter:y,onMouseMove:w,onMouseLeave:C,onClick:R,debug:c})};vt.propTypes={points:a.arrayOf(a.object).isRequired,width:a.number.isRequired,height:a.number.isRequired,margin:a.object.isRequired,setCurrent:a.func.isRequired,onMouseEnter:a.func,onMouseMove:a.func,onMouseLeave:a.func,onClick:a.func,tooltip:a.oneOfType([a.func,a.object]).isRequired,debug:a.bool.isRequired};var ki=b.memo(vt),Fe=function(t){var e=t.data,i=t.xScale,r=t.xFormat,n=t.yScale,l=t.yFormat,o=t.layers,s=t.curve,u=t.areaBaselineValue,h=t.colors,d=t.margin,c=t.width,f=t.height,g=t.axisTop,p=t.axisRight,y=t.axisBottom,w=t.axisLeft,C=t.enableGridX,R=t.enableGridY,_=t.gridXValues,B=t.gridYValues,V=t.lineWidth,F=t.enableArea,H=t.areaOpacity,j=t.areaBlendMode,q=t.enablePoints,m=t.pointSymbol,x=t.pointSize,k=t.pointColor,T=t.pointBorderWidth,P=t.pointBorderColor,W=t.enablePointLabel,G=t.pointLabel,S=t.pointLabelYOffset,O=t.defs,K=t.fill,Y=t.markers,z=t.legends,ee=t.isInteractive,re=t.useMesh,te=t.debugMesh,E=t.onMouseEnter,$=t.onMouseMove,A=t.onMouseLeave,D=t.onClick,he=t.tooltip,U=t.enableSlices,se=t.debugSlices,Z=t.sliceTooltip,N=t.enableCrosshair,ae=t.crosshairType,ie=t.role,oe=rt(c,f,d),ce=oe.margin,Q=oe.innerWidth,ne=oe.innerHeight,Ce=oe.outerWidth,ke=oe.outerHeight,J=dt({data:e,xScale:i,xFormat:r,yScale:n,yFormat:l,width:Q,height:ne,colors:h,curve:s,areaBaselineValue:u,pointColor:k,pointBorderColor:P,enableSlices:U}),qe=J.legendData,Te=J.toggleSerie,de=J.lineGenerator,_e=J.areaGenerator,ye=J.series,be=J.xScale,v=J.yScale,I=J.slices,ue=J.points,L=Se(),fe=Ee(k,L),_t=Ee(P,L),ze=b.useState(null),we=ze[0],De=ze[1],Xe=b.useState(null),Me=Xe[0],He=Xe[1],ge={grid:M.jsx(Ft,{theme:L,width:Q,height:ne,xScale:C?be:null,yScale:R?v:null,xValues:_,yValues:B},"grid"),markers:M.jsx(Tt,{markers:Y,width:Q,height:ne,xScale:be,yScale:v,theme:L},"markers"),axes:M.jsx(Gt,{xScale:be,yScale:v,width:Q,height:ne,theme:L,top:g,right:p,bottom:y,left:w},"axes"),areas:null,lines:M.jsx(Mi,{lines:ye,lineGenerator:de,lineWidth:V},"lines"),slices:null,points:null,crosshair:null,mesh:null,legends:z.map(function(pe,Pe){return M.jsx($t,X({},pe,{containerWidth:Q,containerHeight:ne,data:pe.data||qe,theme:L,toggleSerie:pe.toggleSerie?Te:void 0}),"legend."+Pe)})},wt=jt(O,ye,K);return F&&(ge.areas=M.jsx(_i,{areaGenerator:_e,areaOpacity:H,areaBlendMode:j,lines:ye},"areas")),ee&&U!==!1&&(ge.slices=M.jsx(Si,{slices:I,axis:U,debug:se,height:ne,tooltip:Z,current:Me,setCurrent:He,onMouseEnter:E,onMouseMove:$,onMouseLeave:A,onClick:D},"slices")),q&&(ge.points=M.jsx(Ci,{points:ue,symbol:m,size:x,color:fe,borderWidth:T,borderColor:_t,enableLabel:W,label:G,labelYOffset:S},"points")),ee&&N&&(we!==null&&(ge.crosshair=M.jsx(Ue,{width:Q,height:ne,x:we.x,y:we.y,type:ae},"crosshair")),Me!==null&&(ge.crosshair=M.jsx(Ue,{width:Q,height:ne,x:Me.x,y:Me.y,type:U},"crosshair"))),ee&&re&&U===!1&&(ge.mesh=M.jsx(ki,{points:ue,width:Q,height:ne,margin:ce,current:we,setCurrent:De,onMouseEnter:E,onMouseMove:$,onMouseLeave:A,onClick:D,tooltip:he,debug:te},"mesh")),M.jsx(Ot,{defs:wt,width:Ce,height:ke,margin:ce,role:ie,children:o.map(function(pe,Pe){return typeof pe=="function"?M.jsx(b.Fragment,{children:pe(X({},t,{innerWidth:Q,innerHeight:ne,series:ye,slices:I,points:ue,xScale:be,yScale:v,lineGenerator:de,areaGenerator:_e,currentPoint:we,setCurrentPoint:De,currentSlice:Me,setCurrentSlice:He}))},Pe):ge[pe]})})};Fe.propTypes=pi,Fe.defaultProps=le;var qi=tt(Fe),Pi=function(t){return M.jsx(it,{children:function(e){var i=e.width,r=e.height;return M.jsx(qi,X({width:i,height:r},t))}})},Ge=function(t){var e=t.width,i=t.height,r=t.margin,n=t.pixelRatio,l=t.data,o=t.xScale,s=t.xFormat,u=t.yScale,h=t.yFormat,d=t.curve,c=t.layers,f=t.colors,g=t.lineWidth,p=t.enableArea,y=t.areaBaselineValue,w=t.areaOpacity,C=t.enablePoints,R=t.pointSize,_=t.pointColor,B=t.pointBorderWidth,V=t.pointBorderColor,F=t.enableGridX,H=t.gridXValues,j=t.enableGridY,q=t.gridYValues,m=t.axisTop,x=t.axisRight,k=t.axisBottom,T=t.axisLeft,P=t.legends,W=t.isInteractive,G=t.debugMesh,S=t.onMouseLeave,O=t.onClick,K=t.tooltip,Y=t.canvasRef,z=b.useRef(null),ee=rt(e,i,r),re=ee.margin,te=ee.innerWidth,E=ee.innerHeight,$=ee.outerWidth,A=ee.outerHeight,D=Se(),he=b.useState(null),U=he[0],se=he[1],Z=dt({data:l,xScale:o,xFormat:s,yScale:u,yFormat:h,width:te,height:E,colors:f,curve:d,areaBaselineValue:y,pointColor:_,pointBorderColor:V}),N=Z.lineGenerator,ae=Z.areaGenerator,ie=Z.series,oe=Z.xScale,ce=Z.yScale,Q=Z.points,ne=lt({points:Q,width:te,height:E,debug:G}),Ce=ne.delaunay,ke=ne.voronoi;b.useEffect(function(){Y&&(Y.current=z.current),z.current.width=$*n,z.current.height=A*n;var v=z.current.getContext("2d");v.scale(n,n),v.fillStyle=D.background,v.fillRect(0,0,$,A),v.translate(re.left,re.top),c.forEach(function(I){if(typeof I=="function"&&I({ctx:v,innerWidth:te,innerHeight:E,series:ie,points:Q,xScale:oe,yScale:ce,lineWidth:g,lineGenerator:N,areaGenerator:ae,currentPoint:U,setCurrentPoint:se}),I==="grid"&&D.grid.line.strokeWidth>0&&(v.lineWidth=D.grid.line.strokeWidth,v.strokeStyle=D.grid.line.stroke,F&&Ne(v,{width:te,height:E,scale:oe,axis:"x",values:H}),j&&Ne(v,{width:te,height:E,scale:ce,axis:"y",values:q})),I==="axes"&&Vt(v,{xScale:oe,yScale:ce,width:te,height:E,top:m,right:x,bottom:k,left:T,theme:D}),I==="areas"&&p===!0&&(v.save(),v.globalAlpha=w,ae.context(v),ie.forEach(function(L){v.fillStyle=L.color,v.beginPath(),ae(L.data.map(function(fe){return fe.position})),v.fill()}),v.restore()),I==="lines"&&(N.context(v),ie.forEach(function(L){v.strokeStyle=L.color,v.lineWidth=g,v.beginPath(),N(L.data.map(function(fe){return fe.position})),v.stroke()})),I==="points"&&C===!0&&R>0&&Q.forEach(function(L){v.fillStyle=L.color,v.beginPath(),v.arc(L.x,L.y,R/2,0,2*Math.PI),v.fill(),B>0&&(v.strokeStyle=L.borderColor,v.lineWidth=B,v.stroke())}),I==="mesh"&&G===!0&&(ci(v,ke),U&&di(v,ke,U.index)),I==="legends"){var ue=ie.map(function(L){return{id:L.id,label:L.id,color:L.color}}).reverse();P.forEach(function(L){Yt(v,X({},L,{data:L.data||ue,containerWidth:te,containerHeight:E,theme:D}))})}})},[z,$,A,c,D,N,ie,oe,ce,F,H,j,q,m,x,k,T,P,Q,C,R,U]);var J=b.useCallback(function(v){var I=et(z.current,v),ue=I[0],L=I[1];if(!Bt(re.left,re.top,te,E,ue,L))return null;var fe=Ce.find(ue-re.left,L-re.top);return Q[fe]},[z,re,te,E,Ce]),qe=Ve(),Te=qe.showTooltipFromEvent,de=qe.hideTooltip,_e=b.useCallback(function(v){var I=J(v);se(I),I?Te(b.createElement(K,{point:I}),v):de()},[J,se,Te,de,K]),ye=b.useCallback(function(v){de(),se(null),U&&S&&S(U,v)},[de,se,S]),be=b.useCallback(function(v){if(O){var I=J(v);I&&O(I,v)}},[J,O]);return M.jsx("canvas",{ref:z,width:$*n,height:A*n,style:{width:$,height:A,cursor:W?"auto":"normal"},onMouseEnter:W?_e:void 0,onMouseMove:W?_e:void 0,onMouseLeave:W?ye:void 0,onClick:W?be:void 0})};Ge.propTypes=mi,Ge.defaultProps=yi;var Ti=tt(Ge),ji=b.forwardRef(function(t,e){return M.jsx(Ti,X({},t,{canvasRef:e}))});b.forwardRef(function(t,e){return M.jsx(it,{children:function(i){var r=i.width,n=i.height;return M.jsx(ji,X({width:r,height:n},t,{ref:e}))}})});export{Pi as P};
